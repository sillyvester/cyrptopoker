{"code":"\"use strict\";var Deck=function(){function n(n,e){var o=Date.now()+n,r={start:o,end:o+e};p.push(r),l||(l=!0,requestAnimationFrame(t));var i={start:function(n){return r.startcb=n,i},progress:function(n){return r.progresscb=n,i},end:function(n){return r.endcb=n,i}};return i}function t(){var n=Date.now();if(p.length){for(var e,o=0;o<p.length;o++)if(!(n<(e=p[o]).start)){e.started||(e.started=!0,e.startcb&&e.startcb());var r=(n-e.start)/(e.end-e.start);e.progresscb&&e.progresscb(1>r?r:1),n>e.end&&(e.endcb&&e.endcb(),p.splice(o--,1))}requestAnimationFrame(t)}else l=!1}function e(n){if(\"undefined\"!=typeof g[n])return g[n];if(\"undefined\"!=typeof b[n])return g[n]=n,n;for(var t,e=n[0].toUpperCase()+n.slice(1),o=[\"webkit\",\"moz\",\"Moz\",\"ms\",\"o\"],r=0,i=o.length;i>r;r++)if(\"undefined\"!=typeof b[t=o[r]+e])return g[n]=t,t}function o(n,t,e){return\"undefined\"!=typeof y||(y=r()),e=e||0,y?\"translate3d(\"+n+\", \"+t+\", \"+e+\")\":\"translate(\"+n+\", \"+t+\")\"}function r(){if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return!1;var n=e(\"transform\"),t=document.createElement(\"p\");return document.body.appendChild(t),t.style[n]=\"translate3d(1px,1px,1px)\",y=null!=(y=t.style[n])&&y.length&&\"none\"!==y,document.body.removeChild(t),y}function i(n){return document.createElement(n)}function u(t){function r(n){n.card&&n.card(g)}function u(n){function t(n){x&&(\"mousemove\"===n.type?(i.x=n.clientX,i.y=n.clientY):(i.x=n.touches[0].clientX,i.y=n.touches[0].clientY),m.style[f]=o(Math.round(g.x+i.x-r.x)+\"px\",Math.round(g.y+i.y-r.y)+\"px\")+(g.rot?\" rotate(\"+g.rot+\"deg)\":\"\"))}function e(n){b&&Date.now()-u<200&&g.setSide(\"front\"===g.side?\"back\":\"front\"),\"mouseup\"===n.type?(c(window,\"mousemove\",t),c(window,\"mouseup\",e)):(c(window,\"touchmove\",t),c(window,\"touchend\",e)),x&&(g.x=g.x+i.x-r.x,g.y=g.y+i.y-r.y)}var r={},i={},u=Date.now();n.preventDefault(),\"mousedown\"===n.type?(r.x=i.x=n.clientX,r.y=i.y=n.clientY,a(window,\"mousemove\",t),a(window,\"mouseup\",e)):(r.x=i.x=n.touches[0].clientX,r.y=i.y=n.touches[0].clientY,a(window,\"touchmove\",t),a(window,\"touchend\",e)),x&&(m.style[f]=o(g.x+\"px\",g.y+\"px\")+(g.rot?\" rotate(\"+g.rot+\"deg)\":\"\"),m.style.zIndex=k++)}var d,f=e(\"transform\"),l=t%13+1,p=t/13|0,y=(52-t)/4,m=i(\"div\"),h=i(\"div\"),v=i(\"div\"),x=!1,b=!1,g={i:t,rank:l,suit:p,pos:t,$el:m,mount:function(n){n.appendChild(m),g.$root=n},unmount:function(){g.$root&&g.$root.removeChild(m),g.$root=null},setSide:function(n){\"front\"===n?(\"back\"===g.side&&m.removeChild(v),g.side=\"front\",m.appendChild(h),g.setRankSuit(g.rank,g.suit)):(\"front\"===g.side&&m.removeChild(h),g.side=\"back\",m.appendChild(v),m.setAttribute(\"class\",\"card\"))}},q=s.modules;for(d in h.classList.add(\"face\"),v.classList.add(\"back\"),m.style[f]=o(-y+\"px\",-y+\"px\"),g.x=-y,g.y=-y,g.z=y,g.rot=0,g.setSide(\"back\"),a(m,\"mousedown\",u),a(m,\"touchstart\",u),q)r(q[d]);return g.animateTo=function(t){var e,r,i,u,a,c,d=t.x,s=void 0===d?g.x:d,l=t.y,p=void 0===l?g.y:l,y=t.rot,h=void 0===y?g.rot:y,v=t.ease,x=t.onStart,b=t.onProgress,k=t.onComplete;n(t.delay,t.duration).start(function(){e=g.x||0,r=g.y||0,i=g.rot||0,x&&x()}).progress(function(n){var t=w[v||\"cubicInOut\"](n);u=s-e,a=p-r,c=h-i,b&&b(n,t),g.x=e+u*t,g.y=r+a*t,g.rot=i+c*t,m.style[f]=o(g.x+\"px\",g.y+\"px\")+(c?\"rotate(\"+g.rot+\"deg)\":\"\")}).end(function(){k&&k()})},g.setRankSuit=function(n,t){m.setAttribute(\"class\",\"card \"+(0===t?\"spades\":1===t?\"hearts\":2===t?\"clubs\":3===t?\"diamonds\":\"joker\")+\" rank\"+n)},g.setRankSuit(l,p),g.enableDragging=function(){x||(x=!0,m.style.cursor=\"move\")},g.enableFlipping=function(){b||(b=!0)},g.disableFlipping=function(){b&&(b=!1)},g.disableDragging=function(){x&&(x=!1,m.style.cursor=\"\")},g}function a(n,t,e){n.addEventListener(t,e)}function c(n,t,e){n.removeEventListener(t,e)}function d(){return window.getComputedStyle(document.body).getPropertyValue(\"font-size\").slice(0,-2)}function f(n){return n*Math.PI/180}function s(n){function t(n){n.deck&&n.deck(c)}var e,o,r=new Array(n?55:52),a=i(\"div\"),c=function(n){n||(n={});var t={};return n.on=function(n,e,o){t[n]||(t[n]=[]),t[n].push({cb:e,ctx:o})},n.one=function(n,e,o){t[n]||(t[n]=[]),t[n].push({cb:e,ctx:o,once:!0})},n.off=function(n,e){return n?e?void(t[n]=t[n].filter(function(n){return n.cb!==e})):void(t[n]=[]):void(t={})},n.trigger=function(n){var e=this,o=Array.prototype.slice(arguments,1);(t[n]||[]).filter(function(n){return n.cb.apply(e,o),!n.once})},n}({mount:function(n){(e=n).appendChild(a)},unmount:function(){e.removeChild(a)},cards:r,$el:a}),d=s.modules;for(o in function(n){function t(n){n&&(o.push(n),1===o.length&&function n(){o[0](function(t){if(t)throw t;(o=o.slice(1)).length&&n()})}())}var e=Array.prototype,o=[];n.queue=t,n.queued=function(n){return function(){var o=this,r=arguments;t(function(t){n.apply(o,e.concat.apply(t,r))})}}}(c),d)t(d[o]);a.classList.add(\"deck\");for(var f,l=r.length;l;l--)(f=r[l-1]=u(l-1)).setSide(\"back\"),f.mount(a);return c}var l,p=[];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){setTimeout(n,0)});var y,m,h,v,x,b=document.createElement(\"p\").style,g={},k=52,w={linear:function(n){return n},quadIn:function(n){return n*n},quadOut:function(n){return n*(2-n)},quadInOut:function(n){return.5>n?2*n*n:(4-2*n)*n-1},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return.5>n?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},quartIn:function(n){return n*n*n*n},quartOut:function(n){return 1- --n*n*n*n},quartInOut:function(n){return.5>n?8*n*n*n*n:1-8*--n*n*n*n},quintIn:function(n){return n*n*n*n*n},quintOut:function(n){return 1+--n*n*n*n*n},quintInOut:function(n){return.5>n?16*n*n*n*n*n:1+16*--n*n*n*n*n}},q={deck:function(n){n.shuffle=n.queued(function(t){var e=n.cards;m=d(),function(n){for(var t,e,o=n.length-1;o;o--)t=Math.random()*o|0,e=n[o],n[o]=n[t],n[t]=e}(e),e.forEach(function(n,o){n.pos=o,n.shuffle(function(n){n===e.length-1&&t()})})})},card:function(n){var t=n.$el;n.shuffle=function(e){var o=n.pos,r=o/4,i=2*o;n.animateTo({delay:i,duration:200,x:function(n){return(Math.round(Math.random())?-1:1)*n}(40*Math.random()+20)*m/16,y:-r,rot:0}),n.animateTo({delay:200+i,duration:200,x:-r,y:-r,rot:0,onStart:function(){t.style.zIndex=o},onComplete:function(){e(o)}})}}},C={deck:function(n){n.poker=n.queued(function(t){var e=n.cards,o=e.length;h=d(),e.slice(-5).reverse().forEach(function(n,e){n.poker(e,o,function(e){n.setSide(\"front\"),4===e&&t()})})})},card:function(n){var t=n.$el;n.poker=function(e,o,r){n.animateTo({delay:250*e,duration:250,x:Math.round(70*(e-2.05)*h/16),y:Math.round(-110*h/16),rot:0,onStart:function(){t.style.zIndex=o-1+e},onComplete:function(){r(e)}})}}},S={deck:function(t){t.intro=t.queued(function(e){var o=t.cards;o.forEach(function(t,r){t.setSide(\"front\"),t.intro(r,function(r){n(250,0).start(function(){t.setSide(\"back\")}),r===o.length-1&&e()})})})},card:function(n){var t=e(\"transform\"),r=n.$el;n.intro=function(e,i){var u=500+10*e,a=e/4;r.style[t]=o(-a+\"px\",\"-250px\"),r.style.opacity=0,n.x=-a,n.y=-250-a,n.rot=0,n.animateTo({delay:u,duration:1e3,x:-a,y:-a,onStart:function(){r.style.zIndex=e},onProgress:function(n){r.style.opacity=n},onComplete:function(){r.style.opacity=\"\",i&&i(e)}})}}},I={deck:function(n){n.fan=n.queued(function(t){var e=n.cards,o=e.length;v=d(),e.forEach(function(n,r){n.fan(r,o,function(n){n===e.length-1&&t()})})})},card:function(n){var t=n.$el;n.fan=function(e,o,r){var i=e/4,u=10*e,a=e/(o-1)*260-130;n.animateTo({delay:u,duration:300,x:-i,y:-i,rot:0}),n.animateTo({delay:300+u,duration:300,x:55*Math.cos(f(a-90))*v/16,y:55*Math.sin(f(a-90))*v/16,rot:a,onStart:function(){t.style.zIndex=e},onComplete:function(){r(e)}})}}},M={deck:function(n){n.bysuit=n.queued(function(t){var e=n.cards;x=d(),e.forEach(function(n){n.bysuit(function(n){n===e.length-1&&t()})})})},card:function(n){var t=n.rank,e=n.suit;n.bysuit=function(o){var r=n.i;n.animateTo({delay:10*r,duration:400,x:-Math.round(8*(6.75-t)*x/16),y:-Math.round(92*(1.5-e)*x/16),rot:0,onComplete:function(){o(r)}})}}};return s.animationFrames=n,s.ease=w,s.modules={bysuit:M,fan:I,intro:S,poker:C,shuffle:q,sort:{deck:function(n){n.sort=n.queued(function(t,e){var o=n.cards;o.sort(function(n,t){return e?n.i-t.i:t.i-n.i}),o.forEach(function(n,r){n.sort(r,o.length,function(n){n===o.length-1&&t()},e)})})},card:function(n){var t=n.$el;n.sort=function(e,o,r,i){var u=e/4,a=10*e;n.animateTo({delay:a,duration:400,x:-u,y:-150,rot:0,onComplete:function(){t.style.zIndex=e}}),n.animateTo({delay:a+500,duration:400,x:-u,y:-u,rot:0,onComplete:function(){r(e)}})}}},flip:{deck:function(n){n.flip=n.queued(function(t,e){var o=n.cards.filter(function(n){return\"front\"===n.side}).length/n.cards.length;n.cards.forEach(function(n,t){n.setSide(e||(o>.5?\"back\":\"front\"))}),t()})}}},s.Card=u,s.prefix=e,s.translate=o,s}();","extractedComments":[]}